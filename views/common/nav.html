<div class="nav-hb">
    <div class="center">
        <ul class="head-nav clearfix">

        </ul>
    </div>
</div>
<script type="text/template" id="navListTmpl1">
    {{each datas}}
    <li class="nav-li" data-code="${channelCode}"><a href="${url}">${name} </a></li>
    {{/each}}
</script>
<script type="text/template" id="menuTmpl">
    {{each data}}
    <li class="menu-li">
        <a href="${url}&code=${code}">${name}</a>
    </li>
    {{/each}}
</script>
<script type="text/template" id="detailTmpl">
    <p class="menu-intro fl">
        ${data.summary||'暂无数据'}
    </p>
    <div class="muen-img fr">
        <img src="${data.titleImage||'image/zw.jpg'}" alt="">
    </div>
</script>
<script>
    var navJs = {
        init:function () {

            this.loadNavList();
        },
        //读取栏目
        channelParams:{
            channelCode:''
        },
        flag:true,
        status:true,
        //设置选中导航
        setNavs:function () {
            var code = tools.getUrlParams('code')
            $(".head-nav li[data-code="+code+"]").addClass('active').siblings('li').removeClass('active');
        },
        // 读取栏目列表
        loadNavList: function () {
            var _this = this;
            var $listTmpl = $("#navListTmpl1");
            var $listWrapper = $('.head-nav');
            $listWrapper.empty();
            var loading = tools.loading($listWrapper);
            var params = {
                url: 'siteChannel/list',
                data:{
                    page:1,
                    limitPage:10,
                    channelCode:'wzlm'
                }
            };
            tools.request(params, function(res){
                loading.clean();
                if (res.code === 0) {
                    if (res.datas && res.datas.length > 0) {
                        var datas = res.datas
                        $listTmpl.tmpl({datas: datas}).appendTo($listWrapper);
                        _this.setNavs();
                    } else {
                        $listWrapper.html(tools.NO_DATA);
                    }
                } else {
                    $listWrapper.html(tools.TRY_REFRESH);
                }
            })
        }

    };
    $(function () {
        navJs.init();
    })
</script>
